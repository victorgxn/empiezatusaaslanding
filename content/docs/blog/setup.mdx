---
title: Configuración del Blog
description: Configura el sistema de blog con MDX desde cero
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Steps, Step } from 'fumadocs-ui/components/steps';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';
import { Files, File, Folder } from 'fumadocs-ui/components/files';

# Configuración del Blog

Configura un blog completo con MDX, tipado con TypeScript y optimizado para SEO.

## Estructura de archivos

<Files>
  <Folder name="content" defaultOpen>
    <Folder name="blog" defaultOpen>
      <File name="mi-post.mdx" />
      <File name="otro-post.mdx" />
    </Folder>
  </Folder>
  <Folder name="app" defaultOpen>
    <Folder name="blog" defaultOpen>
      <File name="page.tsx" />
      <Folder name="[slug]" defaultOpen>
        <File name="page.tsx" />
      </Folder>
      <Folder name="category">
        <Folder name="[category]">
          <File name="page.tsx" />
        </Folder>
      </Folder>
    </Folder>
  </Folder>
  <Folder name="components">
    <Folder name="blog">
      <File name="post-card.tsx" />
      <File name="post-header.tsx" />
      <File name="table-of-contents.tsx" />
      <File name="share-buttons.tsx" />
    </Folder>
  </Folder>
  <Folder name="lib">
    <File name="blog.ts" />
  </Folder>
  <Folder name="types">
    <File name="blog.ts" />
  </Folder>
</Files>

## Instalación

<Steps>
  <Step>
    ### Instala las dependencias

    ```bash
    npm install gray-matter reading-time rehype-slug rehype-autolink-headings rehype-pretty-code
    ```

    | Paquete | Uso |
    |---------|-----|
    | `gray-matter` | Parsea frontmatter de MDX |
    | `reading-time` | Calcula tiempo de lectura |
    | `rehype-slug` | Añade IDs a headings |
    | `rehype-autolink-headings` | Links en headings |
    | `rehype-pretty-code` | Syntax highlighting |
  </Step>

  <Step>
    ### Define los tipos

    ```typescript title="types/blog.ts"
    export interface BlogPost {
      slug: string;
      title: string;
      description: string;
      date: string;
      author: Author;
      category: string;
      tags: string[];
      image?: string;
      imageAlt?: string;
      published: boolean;
      content: string;
      readingTime: string;
    }

    export interface Author {
      name: string;
      avatar?: string;
      twitter?: string;
      bio?: string;
    }

    export interface BlogCategory {
      name: string;
      slug: string;
      description: string;
      count: number;
    }

    export interface TableOfContentsItem {
      id: string;
      title: string;
      level: number;
    }
    ```
  </Step>

  <Step>
    ### Crea las utilidades del blog

    ```typescript title="lib/blog.ts"
    import fs from 'fs';
    import path from 'path';
    import matter from 'gray-matter';
    import readingTime from 'reading-time';
    import { BlogPost, BlogCategory, TableOfContentsItem } from '@/types/blog';

    const BLOG_DIR = path.join(process.cwd(), 'content/blog');

    // Obtiene todos los posts
    export function getAllPosts(): BlogPost[] {
      const files = fs.readdirSync(BLOG_DIR);

      const posts = files
        .filter((file) => file.endsWith('.mdx'))
        .map((file) => getPostBySlug(file.replace('.mdx', '')))
        .filter((post): post is BlogPost => post !== null && post.published)
        .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());

      return posts;
    }

    // Obtiene un post por slug
    export function getPostBySlug(slug: string): BlogPost | null {
      try {
        const filePath = path.join(BLOG_DIR, `${slug}.mdx`);
        const fileContents = fs.readFileSync(filePath, 'utf8');
        const { data, content } = matter(fileContents);
        const stats = readingTime(content);

        return {
          slug,
          title: data.title,
          description: data.description,
          date: data.date,
          author: data.author || { name: 'Anónimo' },
          category: data.category || 'general',
          tags: data.tags || [],
          image: data.image,
          imageAlt: data.imageAlt,
          published: data.published !== false,
          content,
          readingTime: stats.text,
        };
      } catch {
        return null;
      }
    }

    // Obtiene posts por categoría
    export function getPostsByCategory(category: string): BlogPost[] {
      return getAllPosts().filter(
        (post) => post.category.toLowerCase() === category.toLowerCase()
      );
    }

    // Obtiene posts por tag
    export function getPostsByTag(tag: string): BlogPost[] {
      return getAllPosts().filter((post) =>
        post.tags.map((t) => t.toLowerCase()).includes(tag.toLowerCase())
      );
    }

    // Obtiene todas las categorías
    export function getAllCategories(): BlogCategory[] {
      const posts = getAllPosts();
      const categoryMap = new Map<string, number>();

      posts.forEach((post) => {
        const count = categoryMap.get(post.category) || 0;
        categoryMap.set(post.category, count + 1);
      });

      return Array.from(categoryMap.entries()).map(([name, count]) => ({
        name: name.charAt(0).toUpperCase() + name.slice(1),
        slug: name.toLowerCase(),
        description: `Artículos sobre ${name}`,
        count,
      }));
    }

    // Obtiene todos los tags únicos
    export function getAllTags(): string[] {
      const posts = getAllPosts();
      const tags = new Set<string>();

      posts.forEach((post) => {
        post.tags.forEach((tag) => tags.add(tag.toLowerCase()));
      });

      return Array.from(tags).sort();
    }

    // Genera tabla de contenidos
    export function getTableOfContents(content: string): TableOfContentsItem[] {
      const headingRegex = /^(#{2,3})\s+(.+)$/gm;
      const toc: TableOfContentsItem[] = [];
      let match;

      while ((match = headingRegex.exec(content)) !== null) {
        const level = match[1].length;
        const title = match[2];
        const id = title
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, '-')
          .replace(/(^-|-$)/g, '');

        toc.push({ id, title, level });
      }

      return toc;
    }

    // Obtiene posts relacionados
    export function getRelatedPosts(currentPost: BlogPost, limit = 3): BlogPost[] {
      const allPosts = getAllPosts().filter((p) => p.slug !== currentPost.slug);

      // Prioriza misma categoría y tags compartidos
      const scored = allPosts.map((post) => {
        let score = 0;
        if (post.category === currentPost.category) score += 10;
        const sharedTags = post.tags.filter((tag) =>
          currentPost.tags.includes(tag)
        );
        score += sharedTags.length * 5;
        return { post, score };
      });

      return scored
        .sort((a, b) => b.score - a.score)
        .slice(0, limit)
        .map(({ post }) => post);
    }

    // Genera slugs estáticos para SSG
    export function getAllPostSlugs(): string[] {
      return getAllPosts().map((post) => post.slug);
    }
    ```
  </Step>

  <Step>
    ### Crea la carpeta de contenido

    ```bash
    mkdir -p content/blog
    ```
  </Step>

  <Step>
    ### Configura MDX en Next.js

    Si aún no tienes MDX configurado, actualiza tu `next.config.ts`:

    ```typescript title="next.config.ts"
    import type { NextConfig } from 'next';
    import createMDX from '@next/mdx';
    import rehypeSlug from 'rehype-slug';
    import rehypeAutolinkHeadings from 'rehype-autolink-headings';
    import rehypePrettyCode from 'rehype-pretty-code';

    const nextConfig: NextConfig = {
      pageExtensions: ['js', 'jsx', 'md', 'mdx', 'ts', 'tsx'],
    };

    const withMDX = createMDX({
      options: {
        rehypePlugins: [
          rehypeSlug,
          [rehypeAutolinkHeadings, { behavior: 'wrap' }],
          [rehypePrettyCode, { theme: 'github-dark' }],
        ],
      },
    });

    export default withMDX(nextConfig);
    ```

    <Callout type="warn">
      Si ya usas fumadocs-mdx para la documentación, el blog puede usar un sistema separado
      o reutilizar la misma configuración. Ambos enfoques son válidos.
    </Callout>
  </Step>
</Steps>

## Crear las páginas

### Lista de posts (Blog index)

```typescript title="app/blog/page.tsx"
import { Metadata } from 'next';
import Link from 'next/link';
import Image from 'next/image';
import { getAllPosts, getAllCategories } from '@/lib/blog';
import { PostCard } from '@/components/blog/post-card';

export const metadata: Metadata = {
  title: 'Blog | EmpiezaTuSaaS',
  description: 'Artículos sobre desarrollo SaaS, indie hacking y emprendimiento tecnológico',
  openGraph: {
    title: 'Blog | EmpiezaTuSaaS',
    description: 'Artículos sobre desarrollo SaaS, indie hacking y emprendimiento tecnológico',
    type: 'website',
  },
};

export default function BlogPage() {
  const posts = getAllPosts();
  const categories = getAllCategories();
  const featuredPost = posts[0]; // El post más reciente como destacado
  const remainingPosts = posts.slice(1);

  return (
    <main className="container mx-auto px-4 py-12">
      {/* Header */}
      <div className="text-center mb-12">
        <h1 className="text-4xl font-bold mb-4">Blog</h1>
        <p className="text-lg text-muted-foreground max-w-2xl mx-auto">
          Recursos, tutoriales y guías para lanzar tu SaaS más rápido
        </p>
      </div>

      {/* Categorías */}
      <div className="flex flex-wrap gap-2 justify-center mb-12">
        <Link
          href="/blog"
          className="px-4 py-2 rounded-full bg-primary text-primary-foreground text-sm"
        >
          Todos
        </Link>
        {categories.map((category) => (
          <Link
            key={category.slug}
            href={`/blog/category/${category.slug}`}
            className="px-4 py-2 rounded-full bg-secondary text-secondary-foreground text-sm hover:bg-primary hover:text-primary-foreground transition-colors"
          >
            {category.name} ({category.count})
          </Link>
        ))}
      </div>

      {/* Post destacado */}
      {featuredPost && (
        <Link
          href={`/blog/${featuredPost.slug}`}
          className="block mb-12 group"
        >
          <article className="relative overflow-hidden rounded-2xl bg-card border">
            {featuredPost.image && (
              <div className="aspect-[2/1] relative">
                <Image
                  src={featuredPost.image}
                  alt={featuredPost.imageAlt || featuredPost.title}
                  fill
                  className="object-cover transition-transform group-hover:scale-105"
                  priority
                />
                <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent" />
              </div>
            )}
            <div className="absolute bottom-0 left-0 right-0 p-8 text-white">
              <span className="text-sm bg-primary px-3 py-1 rounded-full">
                {featuredPost.category}
              </span>
              <h2 className="text-3xl font-bold mt-4 mb-2">
                {featuredPost.title}
              </h2>
              <p className="text-white/80 mb-4">{featuredPost.description}</p>
              <div className="flex items-center gap-4 text-sm text-white/60">
                <span>{featuredPost.author.name}</span>
                <span>·</span>
                <span>{new Date(featuredPost.date).toLocaleDateString('es-ES')}</span>
                <span>·</span>
                <span>{featuredPost.readingTime}</span>
              </div>
            </div>
          </article>
        </Link>
      )}

      {/* Grid de posts */}
      <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {remainingPosts.map((post) => (
          <PostCard key={post.slug} post={post} />
        ))}
      </div>

      {/* Empty state */}
      {posts.length === 0 && (
        <div className="text-center py-12">
          <p className="text-muted-foreground">No hay artículos publicados todavía.</p>
        </div>
      )}
    </main>
  );
}
```

### Página de post individual

```typescript title="app/blog/[slug]/page.tsx"
import { Metadata } from 'next';
import { notFound } from 'next/navigation';
import Image from 'next/image';
import { getPostBySlug, getAllPostSlugs, getRelatedPosts, getTableOfContents } from '@/lib/blog';
import { PostHeader } from '@/components/blog/post-header';
import { TableOfContents } from '@/components/blog/table-of-contents';
import { ShareButtons } from '@/components/blog/share-buttons';
import { PostCard } from '@/components/blog/post-card';
import { MDXContent } from '@/components/blog/mdx-content';

interface Props {
  params: Promise<{ slug: string }>;
}

// Genera rutas estáticas
export async function generateStaticParams() {
  const slugs = getAllPostSlugs();
  return slugs.map((slug) => ({ slug }));
}

// Genera metadata dinámico
export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const { slug } = await params;
  const post = getPostBySlug(slug);

  if (!post) return { title: 'Post no encontrado' };

  const url = `https://tusitio.com/blog/${slug}`;

  return {
    title: `${post.title} | Blog`,
    description: post.description,
    authors: [{ name: post.author.name }],
    openGraph: {
      title: post.title,
      description: post.description,
      type: 'article',
      publishedTime: post.date,
      authors: [post.author.name],
      tags: post.tags,
      images: post.image ? [{ url: post.image, alt: post.imageAlt }] : [],
      url,
    },
    twitter: {
      card: 'summary_large_image',
      title: post.title,
      description: post.description,
      images: post.image ? [post.image] : [],
    },
    alternates: {
      canonical: url,
    },
  };
}

export default async function BlogPostPage({ params }: Props) {
  const { slug } = await params;
  const post = getPostBySlug(slug);

  if (!post) notFound();

  const toc = getTableOfContents(post.content);
  const relatedPosts = getRelatedPosts(post);
  const url = `https://tusitio.com/blog/${slug}`;

  // JSON-LD para SEO
  const jsonLd = {
    '@context': 'https://schema.org',
    '@type': 'BlogPosting',
    headline: post.title,
    description: post.description,
    image: post.image,
    datePublished: post.date,
    author: {
      '@type': 'Person',
      name: post.author.name,
    },
    publisher: {
      '@type': 'Organization',
      name: 'EmpiezaTuSaaS',
      logo: {
        '@type': 'ImageObject',
        url: 'https://tusitio.com/logo.png',
      },
    },
  };

  return (
    <>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
      />

      <article className="container mx-auto px-4 py-12">
        {/* Header del post */}
        <PostHeader post={post} />

        {/* Imagen destacada */}
        {post.image && (
          <div className="relative aspect-[2/1] rounded-2xl overflow-hidden mb-12">
            <Image
              src={post.image}
              alt={post.imageAlt || post.title}
              fill
              className="object-cover"
              priority
            />
          </div>
        )}

        {/* Layout con contenido y sidebar */}
        <div className="grid lg:grid-cols-[1fr_250px] gap-12">
          {/* Contenido principal */}
          <div className="prose prose-lg dark:prose-invert max-w-none">
            <MDXContent content={post.content} />
          </div>

          {/* Sidebar */}
          <aside className="hidden lg:block">
            <div className="sticky top-24 space-y-8">
              {/* Tabla de contenidos */}
              {toc.length > 0 && <TableOfContents items={toc} />}

              {/* Botones de compartir */}
              <ShareButtons url={url} title={post.title} />

              {/* Tags */}
              <div>
                <h3 className="font-semibold mb-3">Tags</h3>
                <div className="flex flex-wrap gap-2">
                  {post.tags.map((tag) => (
                    <a
                      key={tag}
                      href={`/blog/tag/${tag}`}
                      className="text-sm px-3 py-1 bg-secondary rounded-full hover:bg-primary hover:text-primary-foreground transition-colors"
                    >
                      #{tag}
                    </a>
                  ))}
                </div>
              </div>
            </div>
          </aside>
        </div>

        {/* Posts relacionados */}
        {relatedPosts.length > 0 && (
          <section className="mt-16 pt-16 border-t">
            <h2 className="text-2xl font-bold mb-8">Artículos relacionados</h2>
            <div className="grid md:grid-cols-3 gap-8">
              {relatedPosts.map((relatedPost) => (
                <PostCard key={relatedPost.slug} post={relatedPost} />
              ))}
            </div>
          </section>
        )}
      </article>
    </>
  );
}
```

## Componentes del blog

### PostCard

```typescript title="components/blog/post-card.tsx"
import Link from 'next/link';
import Image from 'next/image';
import { BlogPost } from '@/types/blog';

interface PostCardProps {
  post: BlogPost;
}

export function PostCard({ post }: PostCardProps) {
  return (
    <Link href={`/blog/${post.slug}`} className="group">
      <article className="h-full flex flex-col rounded-xl overflow-hidden border bg-card hover:shadow-lg transition-shadow">
        {post.image && (
          <div className="aspect-[16/9] relative overflow-hidden">
            <Image
              src={post.image}
              alt={post.imageAlt || post.title}
              fill
              className="object-cover transition-transform group-hover:scale-105"
            />
          </div>
        )}
        <div className="flex-1 p-6 flex flex-col">
          <div className="flex items-center gap-2 mb-3">
            <span className="text-xs px-2 py-1 bg-primary/10 text-primary rounded-full">
              {post.category}
            </span>
            <span className="text-xs text-muted-foreground">
              {post.readingTime}
            </span>
          </div>
          <h3 className="text-lg font-semibold mb-2 group-hover:text-primary transition-colors">
            {post.title}
          </h3>
          <p className="text-muted-foreground text-sm flex-1">
            {post.description}
          </p>
          <div className="flex items-center gap-2 mt-4 pt-4 border-t text-sm text-muted-foreground">
            <span>{post.author.name}</span>
            <span>·</span>
            <time dateTime={post.date}>
              {new Date(post.date).toLocaleDateString('es-ES', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
              })}
            </time>
          </div>
        </div>
      </article>
    </Link>
  );
}
```

### PostHeader

```typescript title="components/blog/post-header.tsx"
import Image from 'next/image';
import Link from 'next/link';
import { BlogPost } from '@/types/blog';
import { ArrowLeft, Calendar, Clock, User } from 'lucide-react';

interface PostHeaderProps {
  post: BlogPost;
}

export function PostHeader({ post }: PostHeaderProps) {
  return (
    <header className="max-w-3xl mx-auto mb-12">
      {/* Breadcrumb */}
      <Link
        href="/blog"
        className="inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-6"
      >
        <ArrowLeft className="w-4 h-4" />
        Volver al blog
      </Link>

      {/* Categoría */}
      <Link
        href={`/blog/category/${post.category}`}
        className="inline-block text-sm px-3 py-1 bg-primary text-primary-foreground rounded-full mb-4"
      >
        {post.category}
      </Link>

      {/* Título */}
      <h1 className="text-4xl md:text-5xl font-bold mb-6">{post.title}</h1>

      {/* Descripción */}
      <p className="text-xl text-muted-foreground mb-8">{post.description}</p>

      {/* Meta info */}
      <div className="flex flex-wrap items-center gap-6 text-sm text-muted-foreground">
        {/* Autor */}
        <div className="flex items-center gap-2">
          {post.author.avatar ? (
            <Image
              src={post.author.avatar}
              alt={post.author.name}
              width={32}
              height={32}
              className="rounded-full"
            />
          ) : (
            <User className="w-5 h-5" />
          )}
          <span>{post.author.name}</span>
        </div>

        {/* Fecha */}
        <div className="flex items-center gap-2">
          <Calendar className="w-4 h-4" />
          <time dateTime={post.date}>
            {new Date(post.date).toLocaleDateString('es-ES', {
              year: 'numeric',
              month: 'long',
              day: 'numeric',
            })}
          </time>
        </div>

        {/* Tiempo de lectura */}
        <div className="flex items-center gap-2">
          <Clock className="w-4 h-4" />
          <span>{post.readingTime}</span>
        </div>
      </div>
    </header>
  );
}
```

### TableOfContents

```typescript title="components/blog/table-of-contents.tsx"
'use client';

import { useEffect, useState } from 'react';
import { TableOfContentsItem } from '@/types/blog';

interface TableOfContentsProps {
  items: TableOfContentsItem[];
}

export function TableOfContents({ items }: TableOfContentsProps) {
  const [activeId, setActiveId] = useState<string>('');

  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            setActiveId(entry.target.id);
          }
        });
      },
      { rootMargin: '-80px 0px -80% 0px' }
    );

    items.forEach(({ id }) => {
      const element = document.getElementById(id);
      if (element) observer.observe(element);
    });

    return () => observer.disconnect();
  }, [items]);

  return (
    <nav>
      <h3 className="font-semibold mb-3">En este artículo</h3>
      <ul className="space-y-2 text-sm">
        {items.map((item) => (
          <li
            key={item.id}
            style={{ paddingLeft: `${(item.level - 2) * 12}px` }}
          >
            <a
              href={`#${item.id}`}
              className={`block py-1 hover:text-primary transition-colors ${
                activeId === item.id
                  ? 'text-primary font-medium'
                  : 'text-muted-foreground'
              }`}
            >
              {item.title}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  );
}
```

### ShareButtons

```typescript title="components/blog/share-buttons.tsx"
'use client';

import { Twitter, Linkedin, Link2, Check } from 'lucide-react';
import { useState } from 'react';

interface ShareButtonsProps {
  url: string;
  title: string;
}

export function ShareButtons({ url, title }: ShareButtonsProps) {
  const [copied, setCopied] = useState(false);

  const shareLinks = {
    twitter: `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`,
    linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`,
  };

  const copyToClipboard = async () => {
    await navigator.clipboard.writeText(url);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div>
      <h3 className="font-semibold mb-3">Compartir</h3>
      <div className="flex gap-2">
        <a
          href={shareLinks.twitter}
          target="_blank"
          rel="noopener noreferrer"
          className="p-2 rounded-lg bg-secondary hover:bg-primary hover:text-primary-foreground transition-colors"
          aria-label="Compartir en Twitter"
        >
          <Twitter className="w-5 h-5" />
        </a>
        <a
          href={shareLinks.linkedin}
          target="_blank"
          rel="noopener noreferrer"
          className="p-2 rounded-lg bg-secondary hover:bg-primary hover:text-primary-foreground transition-colors"
          aria-label="Compartir en LinkedIn"
        >
          <Linkedin className="w-5 h-5" />
        </a>
        <button
          onClick={copyToClipboard}
          className="p-2 rounded-lg bg-secondary hover:bg-primary hover:text-primary-foreground transition-colors"
          aria-label="Copiar enlace"
        >
          {copied ? (
            <Check className="w-5 h-5 text-green-500" />
          ) : (
            <Link2 className="w-5 h-5" />
          )}
        </button>
      </div>
    </div>
  );
}
```

## Variables de entorno

Añade estas variables a tu `.env.local`:

```bash title=".env.local"
# URL del sitio (para SEO y compartir)
NEXT_PUBLIC_SITE_URL=https://tusitio.com

# Opcional: Analytics
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
```

## Verificar la configuración

Una vez configurado, verifica que:

1. **Carpeta de contenido existe**: `content/blog/`
2. **Utilidades funcionan**: Importa `getAllPosts` sin errores
3. **Páginas cargan**: Visita `/blog` en desarrollo

```bash
npm run dev
# Abre http://localhost:3000/blog
```

<Callout type="info">
  Si ves errores de "module not found", verifica que todas las dependencias
  estén instaladas y que las rutas de importación sean correctas.
</Callout>

## Siguiente paso

[Aprende a crear posts con MDX →](/docs/blog/posts)
